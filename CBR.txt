enable
configure terminal 
hostname CBR
interface gigabitEthernet 0/0/1
description SW-05-Link
ip address 172.16.4.62 255.255.255.240
ip helper-address 172.16.0.3
no shutdown
exit

interface serial 0/1/0
description ISP-Link
ip address 100.100.10.2 255.255.255.252
no shutdown
exit

interface serial 0/1/1
description C-02-Link
ip address 172.16.4.69 255.255.255.252
no shutdown
exit

ip route 0.0.0.0 0.0.0.0 100.100.10.1

interface tunnel 1
ip address 172.20.1.5 255.255.255.252
tunnel source serial 0/1/0
tunnel destination 100.100.10.10
no shutdown
exit	

interface tunnel 2
ip address 172.20.1.1 255.255.255.252
tunnel source serial 0/1/0
tunnel destination 100.100.10.6
no shutdown
exit	

router rip
version 2
passive-interface gigabitEthernet 0/0/1
network 172.16.4.48
network 172.16.4.68
network 172.20.1.0
no auto-summary 
exit
==============================================
interface gigabitEthernet 0/0/0
description VLAN-SW-04
no ip address
no shutdown
exit

interface gigabitEthernet 0/0/0.2
encapsulation dot1Q 2
ip address 172.16.4.1 255.255.255.224
ip helper-address 172.16.0.3
no shutdown 
exit
interface gigabitEthernet 0/0/0.3
encapsulation dot1Q 3
ip address 172.16.3.225 255.255.255.224
ip helper-address 172.16.0.3
no shutdown 
exit
interface gigabitEthernet 0/0/0.4
encapsulation dot1Q 4
ip address 172.16.4.33 255.255.255.240
ip helper-address 172.16.0.3
no shutdown
exit
==============================================

-----------------------config-------------------------

Router>enable
Router#configure terminal 
Enter configuration commands, one per line.  End with CNTL/Z.
Router(config)#hostname CBR
CBR(config)#interface gigabitEthernet 0/0/1
CBR(config-if)#description SW-05-Link
CBR(config-if)#ip address 172.16.4.62 255.255.255.240
CBR(config-if)#ip helper-address 172.16.0.3
CBR(config-if)#no shutdown
CBR(config-if)#exit

CBR(config)#interface serial 0/1/0
CBR(config-if)#description ISP-Link
CBR(config-if)#ip address 100.100.10.2 255.255.255.252
CBR(config-if)#no shutdown
CBR(config-if)#exit

CBR(config)#interface serial 0/1/1
CBR(config-if)#description C-02-Link
CBR(config-if)#ip address 172.16.4.69 255.255.255.252
CBR(config-if)#no shutdown
CBR(config-if)#exit

CBR(config)#ip route 0.0.0.0 0.0.0.0 100.100.10.1

CBR(config)#interface tunnel 1
CBR(config-if)#ip address 172.20.1.5 255.255.255.252
CBR(config-if)#tunnel source serial 0/1/0
CBR(config-if)#tunnel destination 100.100.10.10
CBR(config-if)#no shutdown
CBR(config-if)#exit

CBR(config)#router rip
CBR(config-router)#version 2
CBR(config-router)#passive-interface gigabitEthernet 0/0/1
CBR(config-router)#network 172.16.4.48
CBR(config-router)#network 172.16.4.68
CBR(config-router)#network 172.20.1.0
CBR(config-router)#no auto-summary 
CBR(config-router)#exit

CBR(config)#interface tunnel 2
CBR(config-if)#ip address 172.20.1.1 255.255.255.252
CBR(config-if)#tunnel source serial 0/1/0
CBR(config-if)#tunnel destination 100.100.10.6
CBR(config-if)#no shutdown
CBR(config-if)#exit



111111111111111111111111111111111111111111111111111111

CBR(config)#ip route 0.0.0.0 0.0.0.0 100.100.10.1
CBR(config)#interface tunnel 0 

CBR(config-if)#ip address 172.20.1.1 255.255.255.252
CBR(config-if)#tunnel source serial 0/1/0
CBR(config-if)#tunnel destination 100.100.10.6
CBR(config-if)#no shutdown 
CBR(config-if)#exit
%LINK-5-CHANGED: Interface Tunnel0, changed state to up

%LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel0, changed state to up

CBR(config)#ip route 0.0.0.0 0.0.0.0 100.100.10.1
CBR(config)#interface tunnel 1

CBR(config-if)#ip address 172.20.1.5 255.255.255.252
CBR(config-if)#tunnel source serial 0/1/0
CBR(config-if)#tunnel destination 100.100.10.10
CBR(config-if)#no shutdown 
CBR(config-if)#exit

CBR(config)#interface gigabitEthernet 0/0/0
CBR(config-if)#description VLAN-SW-01
CBR(config-if)#no ip address
CBR(config-if)#no shutdown
CBR(config-if)#exit
CBR(config)#
CBR(config)#interface gigabitEthernet 0/0/0.2
CBR(config-subif)#encapsulation dot1Q 2
CBR(config-subif)#ip address 172.16.3.225 255.255.255.224
CBR(config-subif)#ip helper-address 172.16.0.3
CBR(config-subif)#no shutdown 
CBR(config-subif)#exit
CBR(config)#
CBR(config)#interface gigabitEthernet 0/0/0.3
CBR(config-subif)#encapsulation dot1Q 3
CBR(config-subif)#ip address 172.16.4.1 255.255.255.224
CBR(config-subif)#ip helper-address 172.16.0.3
CBR(config-subif)#no shutdown 
CBR(config-subif)#exit
CBR(config)#
CBR(config)#interface gigabitEthernet 0/0/0.4
CBR(config-subif)#encapsulation dot1Q 4
CBR(config-subif)#ip address 172.16.4.33 255.255.255.240
CBR(config-subif)#ip helper-address 172.16.0.3
CBR(config-subif)#no shutdown
CBR(config-subif)#exit
CBR(config)#

CBR(config)#logging host 172.16.0.3
CBR(config)#logging on
CBR(config)#logging buffered
CBR(config)#logging console
CBR(config)#logging trap
CBR(config)#logging userinfo
CBR(config)#

CBR(config)#ntp server 192.168.2.2 
CBR(config)#ntp server 192.168.2.2 key 1
CBR(config)#ntp authentication-key 1 md5 Cisco
CBR(config)#ntp update-calendar
CBR(config)#ntp trusted-key 1
CBR(config)#service timestamps log datetime msec
CBR(config)#

CBR(config)#access-list 100 deny tcp host 172.16.3.228 any eq 80
CBR(config)#access-list 100 deny tcp host 172.16.3.228 any eq 443
CBR(config)#access-list 100 permit ip any any 
CBR(config)#interface gigabitEthernet 0/0/0
CBR(config-if)#ip acc
*Mar 01, 07:18:51.1818: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel1, changed state to up
*Mar 01, 07:18:51.1818: %ADJ-5-PARENT: Midchain parent maintenance for IP midchain out of 1 65E900C0 - looped chain attempting to stack
*Mar 01, 07:18:51.1818: %TUN-5-RECURDOWN: 1 temporarily disabled due to recursive routing
*Mar 01, 07:18:51.1818: %LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel1, changed state to down
CBR(config-if)#ip access-group 100 in
CBR(config-if)#exit

CBR(config)#banner motd *
Enter TEXT message.  End with the character '*'.
######################################################## 
  This is a Secure area.Please enter your Authentication. 
######################################################## *

CBR(config)#
CBR(config)#enable secret himaN@2024.lk
CBR(config)#
CBR(config)#line console 0
CBR(config-line)#password Himan@2024.lk
CBR(config-line)#exec-timeout 10
CBR(config-line)#login
CBR(config-line)#exit
CBR(config)#
CBR(config)#username Admin secret Himan@Ssh.lk
CBR(config)#ip domain-name yasiru.lk
CBR(config)#crypto key generate rsa
The name for the keys will be: CBR.yasiru.lk
Choose the size of the key modulus in the range of 360 to 4096 for your
  General Purpose Keys. Choosing a key modulus greater than 512 may take
  a few minutes.

How many bits in the modulus [512]: 1024
% Generating 1024 bit RSA keys, keys will be non-exportable...[OK]

CBR(config)#ip ssh version 2
*Mar 1 1:49:16.846: %SSH-5-ENABLED: SSH 1.99 has been enabled
CBR(config)#
CBR(config)#service password-encryption 
CBR(config)#
CBR(config)#security passwords min-length 10
CBR(config)#
CBR(config)#login block 300 attempts 3 within 60
