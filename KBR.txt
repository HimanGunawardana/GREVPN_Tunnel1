enable
configure terminal

hostname KBR
interface gigabitEthernet 0/0/0
description SW-06-Link
ip address 172.16.3.190 255.255.255.192
ip helper-address 172.16.0.3
no shutdown
exit

interface gigabitEthernet 0/0/1
description SW-07-Link
ip address 172.16.2.254 255.255.255.128
ip helper-address 172.16.0.3
no shutdown
exit

interface serial 0/1/1
description ISP-Link
ip address 100.100.10.6 255.255.255.252
no shutdown


ip route 0.0.0.0 0.0.0.0 100.100.10.5

interface tunnel 0
ip address 172.20.1.9 255.255.255.252
tunnel source serial 0/1/1
tunnel destination 100.100.10.10
no shutdown
exit	

router rip
version 2
passive-interface gigabitEthernet 0/0/0
passive-interface gigabitEthernet 0/0/1
network 172.16.2.128
network 172.16.3.128
network 172.20.1.0
no auto-summary 
exit

interface tunnel 2
ip address 172.20.1.2 255.255.255.252
tunnel source serial 0/1/1
tunnel destination 100.100.10.2
no shutdown
exit	

---------------------------------------config----------------------
Router>enable
Router#configure terminal
Enter configuration commands, one per line.  End with CNTL/Z.
Router(config)#
Router(config)#hostname KBR

KBR(config)#interface gigabitEthernet 0/0/0
KBR(config-if)#description SW-06-Link
KBR(config-if)#ip address 172.16.3.190 255.255.255.192
KBR(config-if)#ip helper-address 172.16.0.3
KBR(config-if)#no shutdown

KBR(config-if)#exit
KBR(config)#
KBR(config)#interface gigabitEthernet 0/0/1
KBR(config-if)#description SW-07-Link
KBR(config-if)#ip address 172.16.2.254 255.255.255.128
KBR(config-if)#ip helper-address 172.16.0.3
KBR(config-if)#no shutdown

KBR(config-if)#exit
KBR(config)#
KBR(config)#interface serial 0/1/1
KBR(config-if)#description ISP-Link
KBR(config-if)#ip address 100.100.10.6 255.255.255.252
KBR(config-if)#no shutdown
KBR(config-if)#exit

KBR(config)#ip route 0.0.0.0 0.0.0.0 100.100.10.5
KBR(config)#interface tunnel 0
KBR(config-if)#ip address 172.20.1.9 255.255.255.252
KBR(config-if)#tunnel source serial 0/1/1
KBR(config-if)#tunnel destination 100.100.10.10
KBR(config-if)#no shutdown
KBR(config-if)#exit

KBR(config)#router rip
KBR(config-router)#version 2
KBR(config-router)#passive-interface gigabitEthernet 0/0/0
KBR(config-router)#passive-interface gigabitEthernet 0/0/1
KBR(config-router)#network 172.16.2.128
KBR(config-router)#network 172.16.3.128
KBR(config-router)#network 172.20.1.0
KBR(config-router)#no auto-summary 
KBR(config-router)#exit

KBR(config)#interface tunnel 2
KBR(config-if)#ip address 172.20.1.2 255.255.255.252
KBR(config-if)#tunnel source serial 0/1/1
KBR(config-if)#tunnel destination 100.100.10.2
KBR(config-if)#no shutdown
KBR(config-if)#exit


1111111111111111111111111111111111111111111111111111111111111111111111111111
KBR(config)#ip route 0.0.0.0 0.0.0.0 100.100.10.5
KBR(config)#interface tunnel 0 

KBR(config-if)#ip address 172.20.1.2 255.255.255.252
KBR(config-if)#tunnel source serial 0/1/1
KBR(config-if)#tunnel destination 100.100.10.2
KBR(config-if)#no shutdown 
KBR(config-if)#exit
%LINK-5-CHANGED: Interface Tunnel0, changed state to up

%LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel0, changed state to up

KBR(config)#ip route 0.0.0.0 0.0.0.0 100.100.10.5
KBR(config)#interface tunnel 2

KBR(config-if)#ip address 172.20.1.9 255.255.255.252
KBR(config-if)#tunnel source serial 0/1/1
KBR(config-if)#tunnel destination 100.100.10.10
KBR(config-if)#no shutdown 
KBR(config-if)#exit

KBR(config)#router rip
KBR(config-router)#version 2
KBR(config-router)#passive-interface gigabitEthernet 0/0/0
KBR(config-router)#passive-interface gigabitEthernet 0/0/1
KBR(config-router)#network 172.20.1.0
KBR(config-router)#network 172.20.1.8
KBR(config-router)#network 172.16.3.128
KBR(config-router)#network 172.16.2.128
KBR(config-router)#network 100.100.10.4
KBR(config-router)#no auto-summary 
KBR(config-router)#exit

KBR(config)#logging host 172.16.0.3
KBR(config)#logging on
KBR(config)#logging buffered
KBR(config)#logging console
KBR(config)#logging trap
KBR(config)#logging userinfo
KBR(config)#

KBR(config)#ntp server 192.168.2.2 
KBR(config)#ntp server 192.168.2.2 key 1
KBR(config)#ntp authentication-key 1 md5 Cisco
KBR(config)#ntp update-calendar
KBR(config)#ntp trusted-key 1
KBR(config)#service timestamps log datetime msec
KBR(config)#

KBR(config)#banner motd *
Enter TEXT message.  End with the character '*'.
######################################################## 
  This is a Secure area.Please enter your Authentication. 
######################################################## *

KBR(config)#
KBR(config)#enable secret himaN@2024.lk
KBR(config)#
KBR(config)#line console 0
KBR(config-line)#password Himan@2024.lk
KBR(config-line)#exec-timeout 10
KBR(config-line)#login
KBR(config-line)#exit
KBR(config)#
KBR(config)#username Admin secret Himan@Ssh.lk
KBR(config)#ip domain-name yasiru.lk
KBR(config)#crypto key generate rsa
The name for the keys will be: KBR.yasiru.lk
Choose the size of the key modulus in the range of 360 to 4096 for your
  General Purpose Keys. Choosing a key modulus greater than 512 may take
  a few minutes.

How many bits in the modulus [512]: 1024
% Generating 1024 bit RSA keys, keys will be non-exportable...[OK]

KBR(config)#ip ssh version 2
*Mar 1 1:52:46.902: %SSH-5-ENABLED: SSH 1.99 has been enabled
KBR(config)#
KBR(config)#service password-encryption 
KBR(config)#
KBR(config)#security passwords min-length 10
KBR(config)#
KBR(config)#login block 300 attempts 3 within 60
KBR(config)#

